<svg id="svg" width="620" height="350" viewBox="0 0 620 350" ></svg>
<script>

    function getRandomColor() {
        var letters = '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }
    var svg = d3.select("svg");
    margin = {top: 20, right: 20, bottom: 30, left: 50},
            width = +svg.attr("width") - margin.left - margin.right,
            height = +svg.attr("height") - margin.top - margin.bottom,
            g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");


    // get the data
    $.ajax({
        type: "GET",
        url: "../2data",

        success: function (data) {
            var dataset = JSON.parse(data).res;

            var x = d3.scaleTime()
                    .rangeRound([0, width]);

            var y = d3.scaleLinear()
                    .rangeRound([height, 0]);

            var line = d3.line()
                    .x(function (d) {
                        return x(d.val1);
                    })
                    .y(function (d) {
                        return y(d.val2);
                    });


            x.domain(d3.extent(dataset, function (d) {
                return d.val1;
            }));
            y.domain(d3.extent(dataset, function (d) {
                return d.val2;
            }));

            g.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x))
                    .select(".domain");

            g.append("g")
                    .call(d3.axisLeft(y))
                    .append("text")
                    .attr("fill", "#000")
                    .attr("transform", "rotate(-90)")
                    .attr("y", 6)
                    .attr("dy", "0.71em")
                    .attr("text-anchor", "end");

            g.append("path")
                    .datum(dataset)
                    .attr("fill", "none")
                    .attr("stroke", getRandomColor())
                    .attr("stroke-linejoin", "round")
                    .attr("stroke-linecap", "round")
                    .attr("stroke-width", 1.5)
                    .attr("d", line)
            upload();
        }
    });
</script>