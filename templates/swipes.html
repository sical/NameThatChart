{% include 'nav.html' %}

<div style="margin-top: -0%" class="header">
    <h1 id="brand" class="page-header">
        Does this belongs in :
    </h1>

</div>

<div id="tinderslide" class="center">
    <ul>
        <li class="pane1"
            style="     -moz-box-shadow: 5px 5px 5px 0px #656565;
    -webkit-box-shadow: 5px 5px 5px 0px #656565;
    -o-box-shadow: 5px 5px 5px 0px #656565;
    box-shadow: 5px 5px 5px 0px #656565;
    filter: progid:DXImageTransform.Microsoft.Shadow(color=#656565, Direction=134, Strength=5);
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;background-position:center;background-repeat: no-repeat;background-size:contain;position: absolute;z-index: 20">
            <div class="img"></div>
            <div id="1_txt" style="display: none"></div>
            <div class="like" style="opacity: 0"><i class="fa fa-thumbs-up fa-5x green-text"
                                                    aria-hidden="true"></i></div>
            <div class="dislike" style="opacity: 0"><i class="fa fa-thumbs-down fa-5x red-text"
                                                       aria-hidden="true"></i></div>
        </li>
        <li class="pane2"
            style="     -moz-box-shadow: 5px 5px 5px 0px #656565;
    -webkit-box-shadow: 5px 5px 5px 0px #656565;
    -o-box-shadow: 5px 5px 5px 0px #656565;
    box-shadow: 5px 5px 5px 0px #656565;
    filter: progid:DXImageTransform.Microsoft.Shadow(color=#656565, Direction=134, Strength=5);
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;background-position:center;background-repeat: no-repeat;background-size:contain;position: absolute;z-index: 25">
            <div class="img"></div>
            <div id="2_txt" style="display: none"></div>
            <div class="like" style="opacity: 0"><i class="fa fa-thumbs-up fa-5x green-text"
                                                    aria-hidden="true"></i></div>
            <div class="dislike" style="opacity: 0"><i class="fa fa-thumbs-down fa-5x red-text"
                                                       aria-hidden="true"></i></div>
        </li>
        <li class="pane3"
            style="     -moz-box-shadow: 5px 5px 5px 0px #656565;
    -webkit-box-shadow: 5px 5px 5px 0px #656565;
    -o-box-shadow: 5px 5px 5px 0px #656565;
    box-shadow: 5px 5px 5px 0px #656565;
    filter: progid:DXImageTransform.Microsoft.Shadow(color=#656565, Direction=134, Strength=5);
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;background-position:center;background-repeat: no-repeat;background-size:contain;position: absolute;z-index: 30">
            <div class="img"></div>
            <div id="3_txt" style="display: none"></div>
            <div class="like" style="opacity: 0"><i class="fa fa-thumbs-up fa-5x green-text"
                                                    aria-hidden="true"></i></div>
            <div class="dislike" style="opacity: 0"><i class="fa fa-thumbs-down fa-5x red-text"
                                                       aria-hidden="true"></i></div>
        </li>
        <li class="pane4"
            style="-moz-box-shadow: 5px 5px 5px 0px #656565;-webkit-box-shadow: 5px 5px 5px 0px #656565;-o-box-shadow: 5px 5px 5px 0px #656565;box-shadow: 5px 5px 5px 0px #656565;filter: progid:DXImageTransform.Microsoft.Shadow(color=#656565, Direction=134, Strength=5);-moz-border-radius: 5px;webkit-border-radius: 5px;border-radius: 5px; background-position:center;background-repeat: no-repeat;background-size:contain;position: absolute;z-index: 35">
            <div class="img"></div>
            <div id="4_txt" style="display: none"></div>
            <div class="like" style="opacity: 0"><i class="fa fa-thumbs-up fa-5x green-text"
                                                    aria-hidden="true"></i></div>
            <div class="dislike" style="opacity: 0"><i class="fa fa-thumbs-down fa-5x red-text"
                                                       aria-hidden="true"></i></div>
        </li>
        <li class="pane5" id="test5"
            style="     -moz-box-shadow: 5px 5px 5px 0px #656565;
                                        -webkit-box-shadow: 5px 5px 5px 0px #656565;
                                        -o-box-shadow: 5px 5px 5px 0px #656565;
                                        box-shadow: 5px 5px 5px 0px #656565;
                                        filter: progid:DXImageTransform.Microsoft.Shadow(color=#656565, Direction=134, Strength=5);
                                        -moz-border-radius: 5px;
                                        -webkit-border-radius: 5px;
                                        border-radius: 5px;
                                        background-position: center;
                                        background-repeat: no-repeat;
                                        background-size: contain;
                                        position: absolute;
                                        z-index: 40;
                            ">
            <div class="img"></div>
            <div id="5_txt" style="display: none"></div>
            <div class="like" style="opacity: 0"><i class="fa fa-thumbs-up fa-5x green-text"
                                                    aria-hidden="true"></i></div>
            <div class="dislike" style="opacity: 0"><i class="fa fa-thumbs-down fa-5x red-text"
                                                       aria-hidden="true"></i></div>
        </li>
    </ul>
</div>
</div>
</div>
<!-- /. PAGE INNER  -->
</div>

<!-- /. PAGE WRAPPER  -->
</div>
<!-- /. WRAPPER  -->

<!-- jQuery Js -->
<script src="{{ url_for('static', filename='assets/js/jquery-1.10.2.js') }}"></script>

<!-- Bootstrap Js -->
<script src="{{ url_for('static', filename='assets/js/bootstrap.min.js') }}"></script>

<script src="{{ url_for('static', filename='assets/materialize/js/materialize.min.js') }}"></script>


<script type="text/javascript" src="{{ url_for('static', filename='assets/js/jquery.min.js') }}"></script>
<!-- transform2d lib -->
<script type="text/javascript" src="{{ url_for('static', filename='assets/js/jquery.transform2d.js') }}"></script>

<!-- jTinder lib -->
<script type="text/javascript" src="{{ url_for('static', filename='assets/js/jquery.jTinder.js') }}"></script>


<script type="text/javascript">
    var cat = ["reaching ..."];
    var nb = 5;
    var info = [];
    var width = screen.width;
    var height = screen.height;
    var note = 0;
    $(document).ready(function () {

        if (window.location.href.indexOf('quizz') !== -1) {
            var path = ["static/assets/img/datasets/json/4_diagram_of_the_cause_of_mortality.png", "static/assets/img/datasets/textualsaved/136.jpg", "static/assets/img/datasets/textualsaved/123.jpg", "static/assets/img/datasets/textualsaved/178.jpg", "static/assets/img/datasets/textualsaved/170.jpg"];
            cat = ["pie chart", "line chart", "scatter plot", "bar chart", "polar area diagram"];

            for (var i = 0; i < 5; i++) {
                console.log(i + 1);
                var temp = $('.pane' + (i + 1));
                temp.css("width", "75%");
                temp.css("height", "55%");
                temp.css("max-width", "800px");
                temp.css("background-color", "#FFF");
                temp.css("border", "solid 1px");
                temp.css("background-image", 'url("' + path[i] + '")');
                $("#" + i + "_txt").text("");
                $("#brand").text("Does this belongs in " + cat[4] + " category");
            }

        } else {
            fill();
        }

    });

    $("#tinderslide").jTinder({

        onDislike: function (item) {
            console.log(item.index());

            if (window.location.href.indexOf('quizz') !== -1) {
                $("#brand").text("Does this belongs in " + cat[nb - 2] + " category");
                nb -= 1;
                if (item.index() < 1 || item.index() > 3) {
                    note += 1
                }
                if (item.index() == 0) {
                    done(note);
                }
            } else {
                nb = nb - 1;
                var form = new FormData();
                form.append("vote", false);
                form.append("idimage", info[item.index()].idimage);
                form.append("idtype", info[item.index()].idtype);
                $.ajax({
                    type: "POST",
                    url: "../saveswipe",
                    processData: false,
                    contentType: false,
                    data: form
                });
                if (item.index() == 0) {
                    if (window.location.href.indexOf('main') !== -1) {
                        window.location = "../main"
                    } else if (window.location.href.indexOf('raw') !== -1) {
                        window.location = "../raw"
                    }
                    else {
                        window.location = "simple"
                    }
                }
            }
        },

        onLike: function (item) {
            $("#brand").text("Does this belongs in " + cat[nb - 1] + " category");
            if (window.location.href.indexOf('quizz') !== -1) {
                $("#brand").text("Does this belongs in " + cat[nb - 2] + " category");
                nb -= 1;
                if (item.index() >= 1 && item.index() <= 3) {
                    note += 1
                }

                if (item.index() == 0) {
                    done(note);
                }
            } else {
                nb = nb - 1;
                var form = new FormData();
                form.append("vote", true);
                form.append("idimage", info[item.index()].idimage);
                form.append("idtype", info[item.index()].idtype);
                $.ajax({
                    type: "POST",
                    url: "../saveswipe",
                    processData: false,
                    contentType: false,
                    data: form
                });

                if (item.index() == 0) {
                    if (window.location.href.indexOf('main') !== -1) {
                        window.location = "../main"
                    } else if (window.location.href.indexOf('raw') !== -1) {
                        window.location = "../raw"
                    }
                    else {
                        window.location = "simple"
                    }
                }
            }

        },
        animationRevertSpeed: 200,
        animationSpeed: 400,
        threshold: 1,
        likeSelector: '.like',
        dislikeSelector: '.dislike'
    })
    ;

    function done(val) {
        var form = new FormData();
        console.log(val);
        form.append("note", val);
        $.ajax({
            type: "POST",
            url: "../savenote",
            processData: false,
            contentType: false,
            data: form,
            success: function (data) {
                window.location = "../quizz"
            }
        })
    }

    function fill() {
        $.ajax({
            type: "GET",
            url: "../getfive",
            processData: false,
            contentType: false,
            success: function (data) {
                info = JSON.parse(data);
                var i = 1;
                info.forEach(function (img) {
                    cat.push(img.label);
                    var temp = $('.pane' + i);
                    temp.css("width", "75%");
                    temp.css("height", "55%");
                    temp.css("max-width", "800px");
                    temp.css("background-color", "#FFF");
                    temp.css("border", "solid 1px");
                    temp.css("background-image", 'url("' + img.path + '")');
                    temp.attr("value", img.idimage);
                    $("#" + i + "_txt").text(img.label);
                    $("#brand").text("Does this belongs in " + cat[nb] + " category");
                    i++;
                })

            }
        });
    }
</script>
</body>


</html>