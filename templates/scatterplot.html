<!DOCTYPE html>
<meta charset="utf-8">
<style> /* set the CSS */

.line {
    fill: none;
    stroke: steelblue;
    stroke-width: 2px;
}

</style>
<body>
<svg> </svg>

<!-- load the d3.js library -->
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="{{ url_for('static', filename='assets/js/jquery-1.10.2.js') }}"></script>
<script>

    // set the dimensions and margins of the graph
    var margin = {top: 20, right: 20, bottom: 30, left: 50},
            width = 620 - margin.left - margin.right,
            height = 350 - margin.top - margin.bottom;

    // parse the date / time
    var parseTime = d3.timeParse("%d-%b-%y");

    // set the ranges
    var x = d3.scaleTime().range([0, width]);
    var y = d3.scaleLinear().range([height, 0]);

    // define the line
    var valueline = d3.line()
            .x(function (d) {
                return x(d.date);
            })
            .y(function (d) {
                return y(d.close);
            });

    // append the svg obgect to the body of the page
    // appends a 'group' element to 'svg'
    // moves the 'group' element to the top left margin
    var svg = d3.select("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");

    var bob = {};
    $.ajax({
        type: "GET",
        url: "../getrandom2d",

        success: function (data) {
            bob = JSON.parse(data);
            var datas = bob.res;

            // Scale the range of the data
            x.domain(d3.extent(datas, function (d) {
                return d.val1;
            }));
            y.domain([0, d3.max(datas, function (d) {
                return d.val2;
            })]);


            // Add the scatterplot
            svg.selectAll("dot")
                    .data(datas)
                    .enter().append("circle")
                    .attr("r", 5)
                    .attr("style","fill : "+getRandomColor())
                    .attr("cx", function (d) {
                        return x(d.val1);
                    })
                    .attr("cy", function (d) {
                        return y(d.val2);
                    });

            // Add the X Axis
            svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x));

            // Add the Y Axis
            svg.append("g")
                    .call(d3.axisLeft(y));

        }
    });

        function getRandomColor() {
        var letters = '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }

</script>
</body>